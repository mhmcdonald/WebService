<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>

    <title>Bourdain FC</title>
    <link href="../static/css/bootstrap-3.3.4-dist/css/bootstrap.min.css" rel="stylesheet" media="screen"
          th:href="@{/css/bootstrap-3.3.4-dist/css/bootstrap.min.css}"/>

    <link href="css/bootstrap-3.3.4-dist/css/footable.core.css" rel="stylesheet" type="text/css" />


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

    <script src="css/bootstrap-3.3.4-dist/js/footable.js" type="text/javascript"></script>
    <script src="css/bootstrap-3.3.4-dist/js/footable.sort.js" type="text/javascript"></script>

    <link th:href="@{/css/custom.css}" rel="stylesheet" media="screen"/>

    <script src="css/bootstrap-3.3.4-dist/js/footable.js?v=2-0-1" type="text/javascript"></script>
    <script src="css/bootstrap-3.3.4-dist/js/bootstrap-tab.js" type="text/javascript"></script>


    <style th:remove="all">
        .jumbotron {
        .jumbotron {
            background: url('../static/images/bourdain.jpg') no-repeat center center;
            height: 350px;
            color: white;
            text-shadow: #444 0 1px 1px;
        }

        body {
            color: #2b3636;
            font-family: "Proxima";
        }

        body {
            color: #333;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 14px;
            line-height: 1.42857;
        }

        .row {
            margin-left: -15px;
            margin-right: -15px;
        }

        *::before, *::after {
            box-sizing: border-box;
        }

        *::before, *::after {
            box-sizing: border-box;
        }

        .view-directory .course-listing {
            background-color: rgba(255, 255, 255, 0.7);
        }

    </style>

</head>
<body>
<div class="container" th:replace="fragments/header :: header">
    <p>header</p>
</div>
<div class="jumbotron" th:replace="fragments/jumbotron :: jumbotron">

</div>

<div class="container" sec:authorize="!isAuthenticated()">
    <div th:if="${not #lists.isEmpty(episodes)}">
        <h2>Episode List</h2>
        <table class="table table-striped table-bordered toggle-circle-filled" data-filter="#filter">
            <tr>
                <th>ID</th>
                <th>Season</th>
                <th>Episode Location</th>
                <th>Description</th>
                <th>View</th>
            </tr>
            <tr th:each="episode : ${episodes}">
                <td th:text="${episode.id}"><a href="/episode/${episode.id}">ID</a></td>
                <td th:text="${episode.season.seasonName}">Season</td>
                <td th:text="${episode.episodeName}">Episode Location</td>
                <td th:text="${episode.episodeDesc}">Description</td>
                <td><a th:href="${ '/episode/' + episode.id}">View</a></td>
            </tr>
        </table>

    </div>
</div>

<div class="container" sec:authorize="hasRole('ROLE_USER')">
    <div th:if="${not #lists.isEmpty(episodes)}">
        <h2>Episode List</h2>
        <table class="table table-striped table-bordered toggle-circle-filled" data-filter="#filter">
            <tr>
                <th>ID</th>
                <th>Season</th>
                <th>Episode Location</th>
                <th>Description</th>
                <th>View</th>
            </tr>
            <tr th:each="episode : ${episodes}">
                <td th:text="${episode.id}"><a href="/episode/${episode.id}">ID</a></td>
                <td th:text="${episode.season.seasonName}">Season</td>
                <td th:text="${episode.episodeName}">Episode Location</td>
                <td th:text="${episode.episodeDesc}">Description</td>
                <td><a th:href="${ '/episode/' + episode.id}">View</a></td>
            </tr>
        </table>

    </div>
</div>

<div class="container table-responsive" sec:authorize="hasRole('ROLE_ADMIN')">
    <div th:if="${not #lists.isEmpty(episodes)}">
        <h2>Episode List</h2>
        Sort by
        <a href="#sort" class="sort-column" data-index="0">ID</a> |
        <a href="#sort" class="sort-column" data-index="1">Season</a> |
        <a href="#sort" class="sort-column" data-index="2">Location</a>
        <table class="table table-striped table-bordered toggle-circle-filled" data-filter="#filter">
            <thead>
                <tr>
                <th class="footable-first-column footable-sortable">ID</th>
                <th class="footable-sortable" data-sort-initial="true">Season</th>
                <th>Episode Location</th>
                <th data-sort-ignore="true">Description</th>
                <th>View</th>
                <th>Edit</th>
                <th>Delete</th>
                </tr>
            </thead>
            <tbody>
            <tr th:each="episode : ${episodes}">
                <td th:text="${episode.id}"><a href="/episode/${episode.id}">ID</a></td>
                <td th:text="${episode.season.seasonName}">Season</td>
                <td th:text="${episode.episodeName}">Episode Location</td>
                <td th:text="${episode.episodeDesc}">Description</td>
                <td><a th:href="${ '/episode/' + episode.id}">View</a></td>
                <td><a th:href="${'/episode/edit/' + episode.id}">Edit</a></td>
                <!--<td><a th:href="${'/episode/delete/' + episode.id}"><button type="button">Delete</button></a></td>-->
                <td><form action="#" th:action="@{'/delete/{id}'(id=${episode.id})}" th:method="delete" >
                        <input type="hidden" name="delete" value="delete" />
                        <button type="submit" id="submitButton">Delete</button>
                </form>  </td>
            </tr>
            </tbody>
        </table>

    </div>
</div>

<!--<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet" />-->
<!--<link href="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet" />-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
<!--<script src="https://cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>-->
<!--<script src="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>-->

<script> type="text/javascript"
        $(document).ready(function(){
           $("table").footable();
        });
        $('#datatable').dataTable();
</script>

<script type="text/javascript">
    $(function () {
        $('table').footable();

        $('.sort-column').click(function (e) {
            e.preventDefault();

            //get the footable sort object
            var footableSort = $('table').data('footable-sort');

            //get the index we are wanting to sort by
            var index = $(this).data('index');

            footableSort.doSort(index, 'toggle');
        });
    });
</script>

<div class="container" th:replace="fragments/footer :: footer">
    <p>footer</p>
</div>

</body>
</html>